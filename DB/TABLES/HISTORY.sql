  CREATE TABLE "HISTORY" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"ACTION_ID" VARCHAR2(20 CHAR) NOT NULL ENABLE, 
	"BOOK_ID" NUMBER, 
	"USER_NAME" VARCHAR2(30 CHAR) NOT NULL ENABLE, 
	"TIME" DATE NOT NULL ENABLE, 
	"WISHBOOK_ID" NUMBER, 
	"SECTION" VARCHAR2(30 CHAR), 
	 CONSTRAINT "HISTORY_PK" PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  ALTER TABLE "HISTORY" ADD CONSTRAINT "HISTORY_CON" FOREIGN KEY ("WISHBOOK_ID")
	  REFERENCES "WISHLIST_BOOKS" ("ID") DISABLE;
  ALTER TABLE "HISTORY" ADD CONSTRAINT "HISTORY_CON_SEC" FOREIGN KEY ("SECTION")
	  REFERENCES "SECTIONS" ("SECTION") ON DELETE CASCADE ENABLE;
  ALTER TABLE "HISTORY" ADD CONSTRAINT "ACTION_FK" FOREIGN KEY ("ACTION_ID")
	  REFERENCES "ACTIONS" ("ACTION") ENABLE;
  ALTER TABLE "HISTORY" ADD CONSTRAINT "BOOK_ID_FK" FOREIGN KEY ("BOOK_ID")
	  REFERENCES "BOOKS" ("ID") DISABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "HISTORY_TIME" 
before
insert on "HISTORY"
for each row
begin
    :NEW.TIME := SYSDATE;
end;
/
ALTER TRIGGER "HISTORY_TIME" ENABLE;